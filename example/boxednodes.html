<pre style="font-family: monospace">(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">function() { // this is so that when you call uglifyjs on this file, it won't scream because of a toplevel return
<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">var args = <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">process.</span>argv.</span>slice(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>2)</span>
<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span></span>if (<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">args.</span>length </span>!== <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">2)</span></span> <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">return <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">console.</span>log(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>'node boxednodes &lt;jsfile&gt; &lt;htmldst&gt;')</span>
<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span></span></span>var sourcedata = <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">require(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>'fs')</span>.</span>readFileSync(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>args[<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>0]</span>,</span> <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">'utf8')</span>
<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span></span>var aj = <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">require(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>'../')</span>
<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span></span>console.</span>log(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>'parsing...')</span>
<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span></span>var ast = <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">aj.</span>makeAst(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>sourcedata)</span>
<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span></span>console.</span>log(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>'parsing done')</span>
<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span></span>sourcedata </span>= <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">sourcedata.</span>split(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>'')</span> </span></span></span>// lazy string stuff
<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">sourcedata </span>= <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">sourcedata.</span>map(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>function(char) {
  <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">switch (<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">char)</span> {
    case <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">'&lt;':</span> <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">return <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">'&amp;lt;'
</span></span>    case <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">'&gt;':</span> <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">return <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">'&amp;gt;'
</span></span>    case <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">'&amp;':</span> <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">return <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">'&amp;amp;'
</span></span>  }
</span>  <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">return <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">char
</span></span>})</span>
<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span></span></span>aj.</span>visitAll(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>ast,</span> <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">function(node) {
  <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">if (<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">node.</span>type </span>=== <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">'toplevel')</span></span> <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">return
</span></span>  <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">if (<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">!<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">node.</span>position)</span></span> <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">throw <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">new <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">Error(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>typeof <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">node.</span>rawNode[<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>0]</span>)</span></span>
</span></span></span>  <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">var from = <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">node.</span>position.</span>startToken.</span>pos
</span>    , to = <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">node.</span>position.</span>endToken.</span>endpos
</span></span>  <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">if (<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">from-<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>1 </span></span>&lt; <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">0 </span></span>|| <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">to+<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>1 </span></span>&gt;= <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">sourcedata.</span>length)</span></span></span> <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">return
</span></span>  <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">sourcedata[<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>from-<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>1]</span></span> </span>+= <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">'&lt;span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"&gt;'
</span></span></span>  <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">sourcedata[<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>to+<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>1]</span></span> </span>= <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">'&lt;/span&gt;' </span>+ <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">sourcedata[<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>to+<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>1]</span></span>
</span></span></span></span>})</span>
<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span></span>sourcedata </span>= <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">sourcedata.</span>join(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>'')</span>
<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span></span></span>sourcedata </span>= <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">'&lt;pre style="font-family: monospace"&gt;'+<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>sourcedata+<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span></span>'&lt;/div&gt;'
<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span></span></span></span>require(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>'fs')</span>.</span>writeFileSync(<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"><span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>args[<span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px"></span>1]</span>,</span> <span style="border: 1px solid gray; background-color: rgba(255, 0, 0, 0.1); margin: 5px">sourcedata)</span>
</span></span>})</span>()
</div>